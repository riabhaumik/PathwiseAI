(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},5356:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},5789:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,5356,23)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,6761)),Promise.resolve().then(t.bind(t,9290))},6761:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>m,A:()=>h});var s=t(5155),o=t(2115),a=t(7124);let n="https://otmrgqdbrcdenzjvpxrx.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90bXJncWRicmNkZW56anZweHJ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3MTc4ODYsImV4cCI6MjA2OTI5Mzg4Nn0.PWW3dVKMvxPbCBltS1LM9gD_HEv4zLj7-k4DyaI9Kx4";if(!n||!l)throw Error("Supabase environment variables are not configured. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in .env.local");let i=(0,a.UU)(n,l);class u{setToken(e){this.token=e,localStorage.setItem("auth_token",e)}getToken(){return this.token||(this.token=localStorage.getItem("auth_token")),this.token}removeToken(){this.token=null,localStorage.removeItem("auth_token")}isAuthenticated(){return!!this.getToken()}async login(e){try{var r,t;let{data:s,error:o}=await i.auth.signInWithPassword({email:e.email,password:e.password});if(o)throw Error(o.message);if(!s.user||!s.session)throw Error("Login failed");let a={id:s.user.id,email:s.user.email||"",name:(null==(r=s.user.user_metadata)?void 0:r.name)||(null==(t=s.user.email)?void 0:t.split("@")[0])||""};return{access_token:s.session.access_token,user:a}}catch(e){throw Error(e instanceof Error?e.message:"Login failed")}}async signUp(e){try{var r,t;let{data:s,error:o}=await i.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name||e.email.split("@")[0]}}});if(o)throw Error(o.message);if(!s.user||!s.session)throw Error("Sign up failed");let a={id:s.user.id,email:s.user.email||"",name:(null==(r=s.user.user_metadata)?void 0:r.name)||e.name||(null==(t=s.user.email)?void 0:t.split("@")[0])||""};return{access_token:s.session.access_token,user:a}}catch(e){throw Error(e instanceof Error?e.message:"Sign up failed")}}async logout(){try{let{error:e}=await i.auth.signOut();if(e)throw Error(e.message)}catch(e){console.error("Logout error:",e)}finally{this.removeToken()}}async getCurrentUser(){try{var e,r;let{data:{user:t},error:s}=await i.auth.getUser();if(s)throw Error(s.message);if(!t)throw Error("No user found");return{id:t.id,email:t.email||"",name:(null==(e=t.user_metadata)?void 0:e.name)||(null==(r=t.email)?void 0:r.split("@")[0])||""}}catch(e){throw Error(e instanceof Error?e.message:"Failed to get user")}}constructor(){this.token=null}}let c=new u,d=(0,o.createContext)(void 0);function m(e){let{children:r}=e,[t,a]=(0,o.useState)({user:null,loading:!0,error:null}),[n,l]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{if(c.isAuthenticated()){let e=await c.getCurrentUser();a({user:e,loading:!1,error:null})}else a({user:null,loading:!1,error:null})}catch(e){c.removeToken(),a({user:null,loading:!1,error:null})}})()},[]);let i=async e=>{a(e=>({...e,loading:!0,error:null}));try{let{access_token:r,user:t}=await c.login(e);c.setToken(r),a({user:t,loading:!1,error:null}),l(!1)}catch(e){throw a(r=>({...r,loading:!1,error:e instanceof Error?e.message:"Login failed"})),e}},u=async e=>{a(e=>({...e,loading:!0,error:null}));try{let{access_token:r,user:t}=await c.signUp(e);c.setToken(r),a({user:t,loading:!1,error:null}),l(!1)}catch(e){throw a(r=>({...r,loading:!1,error:e instanceof Error?e.message:"Sign up failed"})),e}},m=async()=>{a(e=>({...e,loading:!0}));try{await c.logout(),c.removeToken(),a({user:null,loading:!1,error:null}),l(!1)}catch(e){c.removeToken(),a({user:null,loading:!1,error:null}),l(!1)}},h={...t,login:i,signUp:u,logout:m,isGuest:n,setGuestMode:e=>{l(e),e&&a({user:null,loading:!1,error:null})}};return(0,s.jsx)(d.Provider,{value:h,children:r})}function h(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9290:(e,r,t)=>{"use strict";t.d(r,{D:()=>l,ThemeProvider:()=>n});var s=t(5155),o=t(2115);let a=(0,o.createContext)({theme:"system",setTheme:()=>null});function n(e){let{children:r,defaultTheme:t="system",storageKey:n="pathwise-theme",...l}=e,[i,u]=(0,o.useState)(()=>{var e;return(null==(e=localStorage)?void 0:e.getItem(n))||t});return(0,o.useEffect)(()=>{let e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===i){let r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.classList.add(r);return}e.classList.add(i)},[i]),(0,s.jsx)(a.Provider,{...l,value:{theme:i,setTheme:e=>{var r;null==(r=localStorage)||r.setItem(n,e),u(e)}},children:r})}let l=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}}},e=>{e.O(0,[444,124,441,964,358],()=>e(e.s=5789)),_N_E=e.O()}]);